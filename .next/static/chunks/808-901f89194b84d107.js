"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[808],{808:function(e,t,n){n.d(t,{AppProviders:function(){return l}});var r=n(7437),s=n(9827),a=n(7453),o=n(9816),i=n(1488),c=n(7075),u=n(962);function l(e){let{children:t}=e;return(0,r.jsx)(s.QueryClientProvider,{client:u.Eh,children:(0,r.jsx)(a.AuthProvider,{children:(0,r.jsx)(o.ThemeProvider,{defaultTheme:"light",storageKey:"ui-theme",children:(0,r.jsxs)(i.TooltipProvider,{children:[(0,r.jsx)(c.x,{}),t]})})})})}},9816:function(e,t,n){n.d(t,{ThemeProvider:function(){return o},useTheme:function(){return i}});var r=n(7437),s=n(2265);let a=(0,s.createContext)({theme:"system",setTheme:()=>null});function o(e){let{children:t,defaultTheme:n="system",storageKey:o="ui-theme",...i}=e,[c,u]=(0,s.useState)(n),[l,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{d(!0);let e=localStorage.getItem(o);e&&u(e)},[o]),(0,s.useEffect)(()=>{if(!l)return;let e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===c){let t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(t);return}e.classList.add(c)},[c,l]),(0,r.jsx)(a.Provider,{...i,value:{theme:c,setTheme:e=>{l&&localStorage.setItem(o,e),u(e)}},children:t})}let i=()=>{let e=(0,s.useContext)(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},7075:function(e,t,n){n.d(t,{x:function(){return T}});var r=n(7437),s=n(3340),a=n(2265),o=n(1915),i=n(535),c=n(2489),u=n(1001);let l=o.Provider,d=a.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.Viewport,{ref:t,className:(0,u.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...s})});d.displayName=o.Viewport.displayName;let p=(0,i.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),g=a.forwardRef((e,t)=>{let{className:n,variant:s,...a}=e;return(0,r.jsx)(o.Root,{ref:t,className:(0,u.cn)(p({variant:s}),n),...a})});g.displayName=o.Root.displayName,a.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.Action,{ref:t,className:(0,u.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...s})}).displayName=o.Action.displayName;let y=a.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.Close,{ref:t,className:(0,u.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...s,children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})});y.displayName=o.Close.displayName;let h=a.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.Title,{ref:t,className:(0,u.cn)("text-sm font-semibold",n),...s})});h.displayName=o.Title.displayName;let f=a.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.Description,{ref:t,className:(0,u.cn)("text-sm opacity-90",n),...s})});function T(){let{toasts:e}=(0,s.pm)();return(0,r.jsxs)(l,{children:[e.map(function(e){let{id:t,title:n,description:s,action:a,...o}=e;return(0,r.jsxs)(g,{...o,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[n&&(0,r.jsx)(h,{children:n}),s&&(0,r.jsx)(f,{children:s})]}),a,(0,r.jsx)(y,{})]},t)}),(0,r.jsx)(d,{})]})}f.displayName=o.Description.displayName},1488:function(e,t,n){n.r(t),n.d(t,{Tooltip:function(){return c},TooltipContent:function(){return l},TooltipProvider:function(){return i},TooltipTrigger:function(){return u}});var r=n(7437),s=n(2265),a=n(1312),o=n(1001);let i=a.zt,c=a.fC,u=a.xz,l=s.forwardRef((e,t)=>{let{className:n,sideOffset:s=4,...i}=e;return(0,r.jsx)(a.VY,{ref:t,sideOffset:s,className:(0,o.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...i})});l.displayName=a.VY.displayName},7453:function(e,t,n){n.d(t,{AuthProvider:function(){return u},useAuth:function(){return c}});var r=n(7437),s=n(2265),a=n(9827),o=n(8410);let i=(0,s.createContext)(null),c=()=>{let e=(0,s.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},u=e=>{let{children:t}=e,[n,c]=(0,s.useState)(!0);(0,a.useQueryClient)();let[u,l]=(0,s.useState)(o.gN.getTokens()),[d,p]=(0,s.useState)(o.gN.getUser()),g=(0,o.f0)({onSuccess:e=>{l({accessToken:e.accessToken,refreshToken:e.refreshToken}),p(e.user)},onError:e=>{throw console.error("Login failed:",e),e}}),y=(0,o.mr)({onSuccess:e=>{l({accessToken:e.accessToken,refreshToken:e.refreshToken}),p(e.user)},onError:e=>{throw console.error("Register failed:",e),e}}),h=(0,o.aU)({onSuccess:()=>{l(null),p(null)}}),f=(0,o.ZU)({onSuccess:e=>{l({accessToken:e.accessToken,refreshToken:e.refreshToken})},onError:()=>{m()}}),T=(0,o.Gn)({onSuccess:e=>{o.gN.setUser(e),p(e)}}),E=(0,o.y8)(),m=(0,s.useCallback)(async()=>{await h.mutateAsync()},[h]),S=async()=>{if(!(null==u?void 0:u.refreshToken))return!1;try{return await f.mutateAsync(u.refreshToken),!0}catch(e){return!1}};(0,s.useEffect)(()=>{(async()=>{let e=o.gN.getTokens(),t=o.gN.getUser();if(e&&t){l(e),p(t);try{console.log("Auth initialized with stored tokens")}catch(e){console.error("Auth initialization failed:",e),await m()}}c(!1)})()},[m]);let R={user:d,tokens:u,login:async e=>{await g.mutateAsync(e)},register:async e=>{await y.mutateAsync(e)},logout:m,refreshToken:S,updateProfile:async e=>{await T.mutateAsync(e)},changePassword:async e=>{await E.mutateAsync(e)},isLoading:n||g.isPending||y.isPending,isAuthenticated:!!d&&!!u};return(0,r.jsx)(i.Provider,{value:R,children:t})}},3340:function(e,t,n){n.d(t,{pm:function(){return p}});var r=n(2265);let s=0,a=new Map,o=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?o(n):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],u={toasts:[]};function l(e){u=i(u,e),c.forEach(e=>{e(u)})}function d(e){let{...t}=e,n=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:n});return l({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||r()}}}),{id:n,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function p(){let[e,t]=r.useState(u);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},6305:function(e,t,n){n.d(t,{gN:function(){return a},x1:function(){return p}});var r=n(3592),s=n(7493);let a={getTokens:()=>{try{let e=localStorage.getItem(s.I.AUTH_TOKENS);return e?JSON.parse(e):null}catch(e){return null}},setTokens:e=>{e?localStorage.setItem(s.I.AUTH_TOKENS,JSON.stringify(e)):localStorage.removeItem(s.I.AUTH_TOKENS)},getUser:()=>{try{let e=localStorage.getItem(s.I.AUTH_USER);return e?JSON.parse(e):null}catch(e){return null}},setUser:e=>{e?localStorage.setItem(s.I.AUTH_USER,JSON.stringify(e)):localStorage.removeItem(s.I.AUTH_USER)},clearAll:()=>{localStorage.removeItem(s.I.AUTH_TOKENS),localStorage.removeItem(s.I.AUTH_USER)}},o=e=>{if(!1!==e.withAuth){let t=a.getTokens();(null==t?void 0:t.accessToken)&&(e.headers={...e.headers,Authorization:"Bearer ".concat(t.accessToken)})}return e},i=e=>(e.headers={...s.QN,...e.headers},e),c=e=>(s.pg.enableLogging&&console.log("\uD83D\uDCE4 ".concat(e.method," ").concat(e.url),{data:e.data,params:e.params,headers:e.headers,baseURL:s.Hz.BASE_URL}),e),u=(e,t)=>(s.pg.enableLogging&&console.log("\uD83D\uDCE5 ".concat(t.method," ").concat(t.url),e),e),l=(e,t)=>e;class d{buildUrl(e,t){let n=e.startsWith("http")?e:"".concat(this.config.baseURL).concat(e);if(t){let e=new URLSearchParams;Object.entries(t).forEach(t=>{let[n,r]=t;null!=r&&e.append(n,String(r))});let r=e.toString();return r?"".concat(n,"?").concat(r):n}return n}createAbortController(e){let t=this.abortControllers.get(e);t&&t.abort();let n=new AbortController;return this.abortControllers.set(e,n),n}async applyRequestInterceptors(e){let t={...e};if(t=c(t=o(t=i(t))),this.config.requestInterceptors){for(let e of this.config.requestInterceptors)if(e.onRequest){let n=e.onRequest(t);t=n instanceof Promise?await n:n}}return t}async applyResponseInterceptors(e,t){let n={...e};if(n=l(n=u(n,t),t),this.config.responseInterceptors){for(let e of this.config.responseInterceptors)if(e.onResponse){let t=e.onResponse(n);n=t instanceof Promise?await t:t}}return n}async request(e){var t,n,a,o;let i;let c=await this.applyRequestInterceptors(e),u=this.buildUrl(c.url,c.params),l=this.createAbortController(u),d=null!==(n=null!==(t=c.retries)&&void 0!==t?t:this.config.retries)&&void 0!==n?n:0;for(let e=0;e<=d;e++)try{e>0&&await new Promise(t=>setTimeout(t,(0,r.Pp)(e-1)));let t={method:c.method,headers:c.headers,signal:l.signal,credentials:"include",mode:"cors"};c.data&&"GET"!==c.method&&(t.body=JSON.stringify(c.data));let n=null!==(o=null!==(a=c.timeout)&&void 0!==a?a:this.config.timeout)&&void 0!==o?o:s.Hz.TIMEOUT,i=setTimeout(()=>l.abort(),n),d=await fetch(u,t);if(clearTimeout(i),this.abortControllers.delete(u),!d.ok)throw new r.aw("HTTP ".concat(d.status,": ").concat(d.statusText),d.status,void 0,{url:u,method:c.method});let p=await d.json();return await this.applyResponseInterceptors(p,c)}catch(t){if(i=(0,r.Lr)(t),e===d||!(0,r.d4)(i,e,d))break;(0,r.H)(i,"API Request Retry ".concat(e+1))}throw(0,r.H)(i,"API Request Failed after ".concat(d+1," attempts")),i}async get(e,t,n){return this.request({method:"GET",url:e,params:t,...n})}async post(e,t,n){return this.request({method:"POST",url:e,data:t,...n})}async put(e,t,n){return this.request({method:"PUT",url:e,data:t,...n})}async patch(e,t,n){return this.request({method:"PATCH",url:e,data:t,...n})}async delete(e,t){return this.request({method:"DELETE",url:e,...t})}cancelRequest(e){let t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e))}cancelAllRequests(){this.abortControllers.forEach((e,t)=>{e.abort()}),this.abortControllers.clear()}updateConfig(e){this.config={...this.config,...e}}constructor(e){this.abortControllers=new Map,this.config={baseURL:s.Hz.BASE_URL||"http://localhost:3001",timeout:s.Hz.TIMEOUT,retries:s.Hz.RETRY_ATTEMPTS,headers:s.QN,...e}}}let p=new d},7493:function(e,t,n){n.d(t,{Hz:function(){return s},I:function(){return i},MG:function(){return o},Pn:function(){return a},QN:function(){return l},RZ:function(){return u},U7:function(){return c},pg:function(){return d}});var r=n(257);let s={BASE_URL:r.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:3001",AUTH_SERVICE_URL:r.env.NEXT_PUBLIC_AUTH_SERVICE_URL||"http://localhost:3001",TIMEOUT:3e4,RETRY_ATTEMPTS:3},a={AUTH:{LOGIN:"/api/v1/auth/login",REGISTER:"/api/v1/auth/register",LOGOUT:"/api/v1/auth/logout",REFRESH_TOKEN:"/api/v1/auth/refresh-token",USER:"/api/v1/auth/user",PROFILE:"/api/v1/auth/profile",CHANGE_PASSWORD:"/api/v1/auth/change-password"},TOOLS:{BASE:"/api/v1/tools",BY_ID:e=>"/api/v1/tools/".concat(e),CATEGORIES:"/api/v1/tools/categories"},PURCHASES:{BASE:"/api/v1/purchases",BY_ID:e=>"/api/v1/purchases/".concat(e),CHANGE_KEY:e=>"/api/v1/purchases/".concat(e,"/key")},PAYMENTS:{BASE:"/api/v1/payments",DEPOSIT:"/api/v1/deposit",HISTORY:"/api/v1/payments/history"},DISCOUNT_CODES:{VALIDATE:"/api/v1/discount-codes/validate",BASE:"/api/v1/discount-codes"},USER:{PROFILE:"/api/v1/user/profile",PASSWORD:"/api/v1/user/password",SETTINGS:"/api/v1/user/settings"},ADMIN:{USERS:"/api/v1/admin/users",TOOLS:"/api/v1/admin/tools",CATEGORIES:"/api/v1/admin/categories",VALIDATIONS:"/api/v1/admin/validations",STATISTICS:"/api/v1/admin/statistics"}},o={OK:200,CREATED:201,NO_CONTENT:204,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,CONFLICT:409,UNPROCESSABLE_ENTITY:422,INTERNAL_SERVER_ERROR:500,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503},i={AUTH_TOKENS:"auth_tokens",AUTH_USER:"auth_user",THEME:"ui-theme",LANGUAGE:"app-language"},c={AUTH:{USER:["auth","user"],TOKENS:["auth","tokens"]},TOOLS:{ALL:["tools"],BY_ID:e=>["tools",e],CATEGORIES:["tools","categories"]},PURCHASES:{ALL:["purchases"],BY_ID:e=>["purchases",e],USER_PURCHASES:["purchases","user"]},PAYMENTS:{ALL:["payments"],HISTORY:["payments","history"]},ADMIN:{USERS:["admin","users"],TOOLS:["admin","tools"],STATISTICS:["admin","statistics"],VALIDATIONS:["admin","validations"]}},u={NETWORK_ERROR:"Lỗi kết nối mạng. Vui l\xf2ng kiểm tra kết nối internet.",UNAUTHORIZED:"Phi\xean đăng nhập đ\xe3 hết hạn. Vui l\xf2ng đăng nhập lại.",FORBIDDEN:"Bạn kh\xf4ng c\xf3 quyền thực hiện thao t\xe1c n\xe0y.",NOT_FOUND:"Kh\xf4ng t\xecm thấy dữ liệu y\xeau cầu.",SERVER_ERROR:"Lỗi m\xe1y chủ. Vui l\xf2ng thử lại sau.",VALIDATION_ERROR:"Dữ liệu kh\xf4ng hợp lệ. Vui l\xf2ng kiểm tra lại.",TIMEOUT_ERROR:"Y\xeau cầu qu\xe1 thời gian chờ. Vui l\xf2ng thử lại.",UNKNOWN_ERROR:"Đ\xe3 xảy ra lỗi kh\xf4ng x\xe1c định. Vui l\xf2ng thử lại."},l={"Content-Type":"application/json",Accept:"application/json"},d={isDevelopment:!1,isProduction:!0,apiBaseUrl:s.BASE_URL,enableLogging:"true"===r.env.NEXT_PUBLIC_DEBUG,enableMocking:"true"===r.env.NEXT_PUBLIC_ENABLE_MOCKING}},3592:function(e,t,n){n.d(t,{H:function(){return h},Lr:function(){return p},Pp:function(){return T},TW:function(){return y},aw:function(){return s},d4:function(){return f}});var r=n(7493);class s extends Error{toJSON(){return{name:this.name,message:this.message,status:this.status,code:this.code,details:this.details,timestamp:this.timestamp}}constructor(e,t,n,r){super(e),this.name="ApiException",this.status=t,this.code=n,this.details=r,this.timestamp=new Date().toISOString()}}class a extends s{constructor(e=r.RZ.NETWORK_ERROR){super(e,0),this.name="NetworkException"}}class o extends s{constructor(e=r.RZ.TIMEOUT_ERROR){super(e,0),this.name="TimeoutException"}}class i extends s{constructor(e,t){super(e,r.MG.UNPROCESSABLE_ENTITY),this.name="ValidationException",this.details=t}}class c extends s{constructor(e=r.RZ.UNAUTHORIZED){super(e,r.MG.UNAUTHORIZED),this.name="UnauthorizedException"}}class u extends s{constructor(e=r.RZ.FORBIDDEN){super(e,r.MG.FORBIDDEN),this.name="ForbiddenException"}}class l extends s{constructor(e=r.RZ.NOT_FOUND){super(e,r.MG.NOT_FOUND),this.name="NotFoundException"}}class d extends s{constructor(e=r.RZ.SERVER_ERROR,t=r.MG.INTERNAL_SERVER_ERROR){super(e,t),this.name="ServerException"}}let p=e=>{if(!navigator.onLine)return new a;if("AbortError"===e.name||"TIMEOUT"===e.code)return new o;if(e instanceof TypeError&&e.message.includes("fetch"))return new a;if(e.response){let{status:t,data:n}=e.response,a=(null==n?void 0:n.message)||g(t);switch(t){case r.MG.UNAUTHORIZED:return new c(a);case r.MG.FORBIDDEN:return new u(a);case r.MG.NOT_FOUND:return new l(a);case r.MG.UNPROCESSABLE_ENTITY:return new i(a,null==n?void 0:n.errors);case r.MG.INTERNAL_SERVER_ERROR:case r.MG.BAD_GATEWAY:case r.MG.SERVICE_UNAVAILABLE:return new d(a,t);default:return new s(a,t,null==n?void 0:n.code,null==n?void 0:n.details)}}return e instanceof s?e:new s(e.message||r.RZ.UNKNOWN_ERROR,r.MG.INTERNAL_SERVER_ERROR)},g=e=>{switch(e){case r.MG.BAD_REQUEST:return r.RZ.VALIDATION_ERROR;case r.MG.UNAUTHORIZED:return r.RZ.UNAUTHORIZED;case r.MG.FORBIDDEN:return r.RZ.FORBIDDEN;case r.MG.NOT_FOUND:return r.RZ.NOT_FOUND;case r.MG.UNPROCESSABLE_ENTITY:return r.RZ.VALIDATION_ERROR;case r.MG.INTERNAL_SERVER_ERROR:case r.MG.BAD_GATEWAY:case r.MG.SERVICE_UNAVAILABLE:return r.RZ.SERVER_ERROR;default:return r.RZ.UNKNOWN_ERROR}},y=e=>{var t;return e instanceof c||(null==e?void 0:e.status)===r.MG.UNAUTHORIZED||(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===r.MG.UNAUTHORIZED},h=(e,t)=>{if(!r.pg.enableLogging)return;let n={timestamp:new Date().toISOString(),context:t||"API",error:e.toJSON(),userAgent:navigator.userAgent,url:window.location.href};r.pg.isDevelopment?(console.group("\uD83D\uDEA8 API Error: ".concat(e.name)),console.error("Message:",e.message),console.error("Status:",e.status),console.error("Details:",e.details),console.error("Full Error:",n),console.groupEnd()):console.error("API Error:",n)},f=(e,t,n)=>!(t>=n)&&(!(e.status>=400)||!(e.status<500))&&!(e instanceof c)&&!(e instanceof u)&&(e instanceof d||e instanceof a||e instanceof o),T=e=>Math.min(1e3*Math.pow(2,e),1e4)},3540:function(e,t,n){n.d(t,{Gn:function(){return g},ZU:function(){return p},aU:function(){return d},f0:function(){return u},mr:function(){return l},y8:function(){return y}});var r=n(9827),s=n(1770),a=n(1193),o=n(7493),i=n(3592),c=n(6305);let u=e=>{var t;let n=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:async e=>(await a.ON.login(e)).data,onSuccess:(t,r,s)=>{var a;c.gN.setTokens({accessToken:t.accessToken,refreshToken:t.refreshToken}),c.gN.setUser(t.user),n.setQueryData(o.U7.AUTH.USER,t.user),n.invalidateQueries({queryKey:o.U7.AUTH.USER}),null==e||null===(a=e.onSuccess)||void 0===a||a.call(e,t)},onError:(t,n,r)=>{var s;let a=(0,i.Lr)(t);null==e||null===(s=e.onError)||void 0===s||s.call(e,a)},onSettled:null==e?void 0:e.onSettled,retry:null!==(t=null==e?void 0:e.retry)&&void 0!==t&&t})},l=e=>{var t;let n=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:async e=>(await a.ON.register(e)).data,onSuccess:(t,r,s)=>{var a;c.gN.setTokens({accessToken:t.accessToken,refreshToken:t.refreshToken}),c.gN.setUser(t.user),n.setQueryData(o.U7.AUTH.USER,t.user),n.invalidateQueries({queryKey:o.U7.AUTH.USER}),null==e||null===(a=e.onSuccess)||void 0===a||a.call(e,t)},onError:(t,n,r)=>{var s;let a=(0,i.Lr)(t);null==e||null===(s=e.onError)||void 0===s||s.call(e,a)},onSettled:null==e?void 0:e.onSettled,retry:null!==(t=null==e?void 0:e.retry)&&void 0!==t&&t})},d=e=>{var t;let n=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:async()=>{try{await a.ON.logout()}catch(e){console.warn("Logout API call failed:",e)}},onSuccess:(t,r,s)=>{var a;c.gN.clearAll(),n.clear(),n.setQueryData(o.U7.AUTH.USER,null),null==e||null===(a=e.onSuccess)||void 0===a||a.call(e,t)},onError:(t,n,r)=>{var s;let a=(0,i.Lr)(t);null==e||null===(s=e.onError)||void 0===s||s.call(e,a)},onSettled:null==e?void 0:e.onSettled,retry:null!==(t=null==e?void 0:e.retry)&&void 0!==t&&t})},p=e=>{var t;let n=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:async e=>(await a.ON.refreshToken({refreshToken:e})).data,onSuccess:(t,r,s)=>{var a;c.gN.setTokens({accessToken:t.accessToken,refreshToken:t.refreshToken}),n.invalidateQueries({queryKey:o.U7.AUTH.USER}),null==e||null===(a=e.onSuccess)||void 0===a||a.call(e,t)},onError:(t,r,s)=>{var a;c.gN.clearAll(),n.clear();let o=(0,i.Lr)(t);null==e||null===(a=e.onError)||void 0===a||a.call(e,o)},onSettled:null==e?void 0:e.onSettled,retry:null!==(t=null==e?void 0:e.retry)&&void 0!==t&&t})},g=e=>{var t;let n=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:async e=>(await a.ON.updateProfile(e)).data,onSuccess:(t,r,s)=>{var a;c.gN.setUser(t),n.setQueryData(o.U7.AUTH.USER,t),n.invalidateQueries({queryKey:o.U7.AUTH.USER}),null==e||null===(a=e.onSuccess)||void 0===a||a.call(e,t)},onError:(t,n,r)=>{var s;let a=(0,i.Lr)(t);null==e||null===(s=e.onError)||void 0===s||s.call(e,a)},onSettled:null==e?void 0:e.onSettled,retry:null!==(t=null==e?void 0:e.retry)&&void 0!==t&&t})},y=e=>{var t;return(0,s.useMutation)({mutationFn:async e=>(await a.ON.changePassword(e)).data,onSuccess:(t,n,r)=>{var s;null==e||null===(s=e.onSuccess)||void 0===s||s.call(e,t)},onError:(t,n,r)=>{var s;let a=(0,i.Lr)(t);null==e||null===(s=e.onError)||void 0===s||s.call(e,a)},onSettled:null==e?void 0:e.onSettled,retry:null!==(t=null==e?void 0:e.retry)&&void 0!==t&&t})}},2353:function(e,t,n){n(1193),n(7493)},8410:function(e,t,n){n.d(t,{Hz:function(){return a.Hz},TW:function(){return s.TW},gN:function(){return r.gN},y8:function(){return o.y8},f0:function(){return o.f0},aU:function(){return o.aU},ZU:function(){return o.ZU},mr:function(){return o.mr},Gn:function(){return o.Gn}});var r=n(6305),s=n(3592),a=n(7493);n(1193);var o=n(3540);n(2353)},1193:function(e,t,n){n.d(t,{ON:function(){return o}});var r=n(6305),s=n(7493);class a{async login(e){return r.x1.post(s.Pn.AUTH.LOGIN,e)}async register(e){return r.x1.post(s.Pn.AUTH.REGISTER,e)}async logout(){return r.x1.post(s.Pn.AUTH.LOGOUT)}async refreshToken(e){return r.x1.post(s.Pn.AUTH.REFRESH_TOKEN,e)}async getCurrentUser(){return r.x1.get(s.Pn.AUTH.USER)}async updateProfile(e){return r.x1.put(s.Pn.AUTH.PROFILE,e)}async changePassword(e){return r.x1.put(s.Pn.AUTH.CHANGE_PASSWORD,e)}async verifyToken(){return r.x1.get("/api/auth/verify")}async requestPasswordReset(e){return r.x1.post("/api/auth/forgot-password",{email:e})}async resetPassword(e,t){return r.x1.post("/api/auth/reset-password",{token:e,newPassword:t})}}let o=new a;class i{async getTools(e){return r.x1.get(s.Pn.TOOLS.BASE,e)}async getToolById(e){return r.x1.get(s.Pn.TOOLS.BY_ID(e))}async getCategories(){return r.x1.get(s.Pn.TOOLS.CATEGORIES)}async searchTools(e,t){let n={query:e,...t};return r.x1.get("/api/tools/search",n)}async getFeaturedTools(){return r.x1.get("/api/tools/featured")}async getToolsByCategory(e,t){return r.x1.get("/api/tools/category/".concat(e),t)}async getPopularTools(e){return r.x1.get("/api/tools/popular",e?{limit:e}:void 0)}async getRecommendedTools(){return r.x1.get("/api/tools/recommended")}async getToolStatistics(e){return r.x1.get("/api/tools/".concat(e,"/statistics"))}async getSimilarTools(e,t){return r.x1.get("/api/tools/".concat(e,"/similar"),t?{limit:t}:void 0)}}new i;class c{async createPurchase(e){return r.x1.post(s.Pn.PURCHASES.BASE,e)}async getUserPurchases(e){return r.x1.get(s.Pn.PURCHASES.BASE,e)}async getPurchaseById(e){return r.x1.get(s.Pn.PURCHASES.BY_ID(e))}async changeKey(e,t){return r.x1.put(s.Pn.PURCHASES.CHANGE_KEY(e),t)}async getPurchaseHistory(e){return r.x1.get("/api/purchases/history",e)}async verifyKey(e,t){return r.x1.post("/api/purchases/".concat(e,"/verify"),{key:t})}async getPurchaseStatistics(){return r.x1.get("/api/purchases/statistics")}async renewPurchase(e){return r.x1.post("/api/purchases/".concat(e,"/renew"))}async cancelPurchase(e,t){return r.x1.post("/api/purchases/".concat(e,"/cancel"),{reason:t})}async downloadReceipt(e){return r.x1.get("/api/purchases/".concat(e,"/receipt"))}async getActivePurchases(){return r.x1.get("/api/purchases/active")}async getExpiredPurchases(){return r.x1.get("/api/purchases/expired")}}new c;class u{async createDeposit(e){return r.x1.post(s.Pn.PAYMENTS.DEPOSIT,e)}async getPaymentHistory(e){return r.x1.get(s.Pn.PAYMENTS.HISTORY,e)}async getPayments(e){return r.x1.get(s.Pn.PAYMENTS.BASE,e)}async getPaymentById(e){return r.x1.get("/api/payments/".concat(e))}async getUserBalance(){return r.x1.get("/api/payments/balance")}async getPaymentStatistics(){return r.x1.get("/api/payments/statistics")}async verifyPayment(e){return r.x1.post("/api/payments/".concat(e,"/verify"))}async cancelPayment(e,t){return r.x1.post("/api/payments/".concat(e,"/cancel"),{reason:t})}async refundPayment(e,t,n){return r.x1.post("/api/payments/".concat(e,"/refund"),{amount:t,reason:n})}async getPendingPayments(){return r.x1.get("/api/payments/pending")}async getCompletedPayments(){return r.x1.get("/api/payments/completed")}async getFailedPayments(){return r.x1.get("/api/payments/failed")}async retryPayment(e){return r.x1.post("/api/payments/".concat(e,"/retry"))}async downloadReceipt(e){return r.x1.get("/api/payments/".concat(e,"/receipt"))}async updatePaymentMethod(e){return r.x1.put("/api/payments/payment-method",e)}}new u;class l{async validateDiscountCode(e){return r.x1.post(s.Pn.DISCOUNT_CODES.VALIDATE,e)}async getDiscountCodes(e){return r.x1.get(s.Pn.DISCOUNT_CODES.BASE,e)}async getDiscountCodeById(e){return r.x1.get("/api/discount-codes/".concat(e))}async createDiscountCode(e){return r.x1.post(s.Pn.DISCOUNT_CODES.BASE,e)}async updateDiscountCode(e,t){return r.x1.put("/api/discount-codes/".concat(e),t)}async deleteDiscountCode(e){return r.x1.delete("/api/discount-codes/".concat(e))}async getActiveDiscountCodes(){return r.x1.get("/api/discount-codes/active")}async getExpiredDiscountCodes(){return r.x1.get("/api/discount-codes/expired")}async getDiscountCodeStatistics(e){return r.x1.get("/api/discount-codes/".concat(e,"/statistics"))}async bulkCreateDiscountCodes(e){return r.x1.post("/api/discount-codes/bulk",{codes:e})}async applyDiscountCode(e,t){return r.x1.post("/api/discount-codes/apply",{code:e,toolId:t})}async getUserDiscountCodes(){return r.x1.get("/api/discount-codes/user")}}new l;class d{async getStatistics(){return r.x1.get(s.Pn.ADMIN.STATISTICS)}async getUsers(e){return r.x1.get(s.Pn.ADMIN.USERS,e)}async getUserById(e){return r.x1.get("/api/admin/users/".concat(e))}async updateUser(e,t){return r.x1.put("/api/admin/users/".concat(e),t)}async deleteUser(e){return r.x1.delete("/api/admin/users/".concat(e))}async banUser(e,t){return r.x1.post("/api/admin/users/".concat(e,"/ban"),{reason:t})}async unbanUser(e){return r.x1.post("/api/admin/users/".concat(e,"/unban"))}async getTools(e){return r.x1.get(s.Pn.ADMIN.TOOLS,e)}async createTool(e){return r.x1.post(s.Pn.ADMIN.TOOLS,e)}async updateTool(e,t){return r.x1.put("/api/admin/tools/".concat(e),t)}async deleteTool(e){return r.x1.delete("/api/admin/tools/".concat(e))}async getCategories(e){return r.x1.get(s.Pn.ADMIN.CATEGORIES,e)}async createCategory(e){return r.x1.post(s.Pn.ADMIN.CATEGORIES,e)}async updateCategory(e,t){return r.x1.put("/api/admin/categories/".concat(e),t)}async deleteCategory(e){return r.x1.delete("/api/admin/categories/".concat(e))}async getKeyValidations(e){return r.x1.get(s.Pn.ADMIN.VALIDATIONS,e)}async createKeyValidation(e){return r.x1.post(s.Pn.ADMIN.VALIDATIONS,e)}async getSystemLogs(e){return r.x1.get("/api/admin/logs",e)}async getRevenueStatistics(e){return r.x1.get("/api/admin/revenue",e?{period:e}:void 0)}async getUserActivityStatistics(){return r.x1.get("/api/admin/user-activity")}async exportData(e,t){return r.x1.post("/api/admin/export",{type:e,format:t})}async importData(e,t){let n=new FormData;return n.append("file",t),n.append("type",e),r.x1.post("/api/admin/import",n,{headers:{"Content-Type":"multipart/form-data"}})}async updateSystemSettings(e){return r.x1.put("/api/admin/settings",e)}async getSystemSettings(){return r.x1.get("/api/admin/settings")}}new d},962:function(e,t,n){n.d(t,{Eh:function(){return u},Nv:function(){return c}});var r=n(4114),s=n(8410);let a=s.Hz.BASE_URL,o=s.gN.getTokens;async function i(e){if(!e.ok){let t=await e.text()||e.statusText;throw Error("".concat(e.status,": ").concat(t))}}async function c(e,t,n){let r=o(),s={"Content-Type":"application/json"};(null==r?void 0:r.accessToken)&&(s.Authorization="Bearer ".concat(r.accessToken));let c=t.startsWith("http")?t:"".concat(a).concat(t),u=await fetch(c,{method:e,headers:s,body:n?JSON.stringify(n):void 0,credentials:"include"});return await i(u),u}s.gN.setTokens,s.gN.getUser,s.gN.setUser;let u=new r.S({defaultOptions:{queries:{queryFn:(e=>{let{on401:t}=e;return async e=>{let{queryKey:n}=e,r=o(),s={};(null==r?void 0:r.accessToken)&&(s.Authorization="Bearer ".concat(r.accessToken));let c=n.join("/"),u=c.startsWith("http")?c:"".concat(a).concat(c),l=await fetch(u,{headers:s,credentials:"include"});return"returnNull"===t&&401===l.status?null:(await i(l),await l.json())}})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}})},1001:function(e,t,n){n.d(t,{cn:function(){return a}});var r=n(1994),s=n(3335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}}}]);