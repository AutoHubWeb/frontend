(()=>{var e={};e.id=449,e.ids=[449],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4183:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>r.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>o,routeModule:()=>m,tree:()=>c}),t(5074),t(7658),t(1930),t(2523);var i=t(3191),n=t(8716),a=t(7922),r=t.n(a),d=t(5231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(s,l);let c=["",{children:["deposit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5074)),"D:\\TOOL\\AutoHubWeb\\frontend\\src\\app\\deposit\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7658)),"D:\\TOOL\\AutoHubWeb\\frontend\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,1930)),"D:\\TOOL\\AutoHubWeb\\frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,2523)),"D:\\TOOL\\AutoHubWeb\\frontend\\src\\app\\not-found.tsx"]}],o=["D:\\TOOL\\AutoHubWeb\\frontend\\src\\app\\deposit\\page.tsx"],h="/deposit/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/deposit/page",pathname:"/deposit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6813:(e,s,t)=>{Promise.resolve().then(t.bind(t,2022))},361:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});let i=(0,t(2881).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});let i=(0,t(2881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1821:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});let i=(0,t(2881).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},6671:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});let i=(0,t(2881).Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},2022:(e,s,t)=>{"use strict";t.d(s,{default:()=>S});var i=t(326),n=t(7577),a=t(3978),r=t(9622),d=t(4976),l=t(7369),c=t(119),o=t(230),h=t(4097),x=t(4681),m=t(5957),u=t(9752),p=t(1664),g=t(1190),j=t(4794),v=t(1867);let N=n.forwardRef(({className:e,...s},t)=>i.jsx("textarea",{className:(0,v.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));N.displayName="Textarea";var y=t(8443),b=t(8916),f=t(6671);let k=(0,t(2881).Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);var w=t(1821),L=t(361),O=t(8998);function S(){let{user:e,isAuthenticated:s}=(0,o.aC)(),{toast:t}=(0,h.pm)(),v=(0,d.useQueryClient)(),[S,A]=(0,n.useState)(""),[M,P]=(0,n.useState)(""),{data:C,isLoading:T}=(0,l.useQuery)({queryKey:["/api/payments"],retry:!1}),Z=(0,c.useMutation)({mutationFn:async({amount:e,description:s})=>{let t=await (0,m.Nv)("POST","/api/deposit",{amount:100*Number(e),description:s});return await t.json()},onSuccess:()=>{t({title:"Nạp tiền th\xe0nh c\xf4ng",description:"Số dư của bạn đ\xe3 được cập nhật"}),v.invalidateQueries({queryKey:["/api/auth/user"]}),v.invalidateQueries({queryKey:["/api/payments"]}),A(""),P("")},onError:e=>{if((0,x.TW)(e)){t({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="https://shopnro.hitly.click/api/login"},500);return}t({title:"Lỗi",description:e.message||"Kh\xf4ng thể nạp tiền",variant:"destructive"})}}),_=C?.filter(e=>"deposit"===e.type).slice(0,5)||[];return i.jsx(a.Ar,{showSidebar:s,children:i.jsx("div",{className:"p-8",children:(0,i.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,i.jsxs)("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Nạp tiền"}),i.jsx("p",{className:"text-muted-foreground",children:"Nạp tiền v\xe0o t\xe0i khoản để mua c\xe1c c\xf4ng cụ"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,i.jsxs)(r.E.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:[(0,i.jsxs)(u.Zb,{children:[i.jsx(u.Ol,{children:(0,i.jsxs)(u.ll,{className:"flex items-center",children:[i.jsx(b.Z,{className:"mr-2 h-5 w-5"}),"Nạp tiền v\xe0o t\xe0i khoản"]})}),(0,i.jsxs)(u.aY,{className:"space-y-6",children:[i.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx(f.Z,{className:"h-5 w-5 text-emerald-600"}),i.jsx("span",{className:"font-medium",children:"Số dư hiện tại:"})]}),(0,i.jsxs)("span",{className:"text-2xl font-bold text-emerald-600","data-testid":"text-current-balance",children:[Number(e?.balance||0).toLocaleString("vi-VN"),"₫"]})]})}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx(j._,{children:"Chọn nhanh số tiền"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:[5e4,1e5,2e5,5e5,1e6,2e6].map(e=>(0,i.jsxs)(p.z,{variant:S===e.toString()?"default":"outline",size:"sm",onClick:()=>A(e.toString()),"data-testid":`button-quick-amount-${e}`,children:[e.toLocaleString("vi-VN"),"₫"]},e))})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(j._,{htmlFor:"amount",children:"Hoặc nhập số tiền t\xf9y chỉnh (₫)"}),i.jsx(g.I,{id:"amount",type:"number",placeholder:"Nhập số tiền muốn nạp",value:S,onChange:e=>A(e.target.value),min:"10000",step:"10000","data-testid":"input-custom-amount"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Số tiền tối thiểu: 10,000₫"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(j._,{htmlFor:"description",children:"Ghi ch\xfa (t\xf9y chọn)"}),i.jsx(N,{id:"description",placeholder:"Nhập ghi ch\xfa cho giao dịch n\xe0y",value:M,onChange:e=>P(e.target.value),rows:3,"data-testid":"input-description"})]}),i.jsx(p.z,{className:"w-full",onClick:()=>{if(!S||0>=Number(S)){t({title:"Lỗi",description:"Vui l\xf2ng nhập số tiền hợp lệ",variant:"destructive"});return}Z.mutate({amount:S,description:M||"Nạp tiền v\xe0o t\xe0i khoản"})},disabled:!S||0>=Number(S)||Z.isPending,"data-testid":"button-deposit",children:Z.isPending?"Đang xử l\xfd...":`Nạp ${S?Number(S).toLocaleString("vi-VN")+"₫":"tiền"}`})]})]}),(0,i.jsxs)(u.Zb,{className:"mt-6",children:[i.jsx(u.Ol,{children:(0,i.jsxs)(u.ll,{className:"flex items-center",children:[i.jsx(k,{className:"mr-2 h-5 w-5"}),"Hướng dẫn nạp tiền"]})}),i.jsx(u.aY,{children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Chuyển khoản ng\xe2n h\xe0ng"}),(0,i.jsxs)("div",{className:"text-sm space-y-1",children:[(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Ng\xe2n h\xe0ng:"})," Vietcombank"]}),(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Số t\xe0i khoản:"})," 1234567890"]}),(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Chủ t\xe0i khoản:"})," CONG TY TOOLMARKET"]}),(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Nội dung:"})," NAPIEN [email của bạn]"]})]})]}),(0,i.jsxs)("div",{className:"bg-emerald-50 dark:bg-emerald-950 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-semibold text-emerald-800 dark:text-emerald-200 mb-2",children:"V\xed điện tử MoMo"}),(0,i.jsxs)("div",{className:"text-sm space-y-1",children:[(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Số điện thoại:"})," 0901234567"]}),(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Chủ t\xe0i khoản:"})," TOOLMARKET"]}),(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Nội dung:"})," NAPIEN [email của bạn]"]})]})]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground p-4 bg-muted/50 rounded-lg",children:[i.jsx("p",{className:"font-medium mb-2",children:"Lưu \xfd quan trọng:"}),(0,i.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Vui l\xf2ng ghi đ\xfang nội dung chuyển khoản để hệ thống tự động cộng tiền"}),i.jsx("li",{children:"Số dư sẽ được cập nhật trong v\xf2ng 5-10 ph\xfat sau khi chuyển khoản th\xe0nh c\xf4ng"}),i.jsx("li",{children:"Nếu c\xf3 vấn đề, vui l\xf2ng li\xean hệ bộ phận hỗ trợ"})]})]})]})})]})]}),(0,i.jsxs)(r.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:[(0,i.jsxs)(u.Zb,{className:"mb-6",children:[i.jsx(u.Ol,{children:i.jsx(u.ll,{children:"Th\xf4ng tin t\xe0i khoản"})}),(0,i.jsxs)(u.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Số dư hiện tại"}),(0,i.jsxs)("span",{className:"font-bold text-emerald-600","data-testid":"text-sidebar-balance",children:[Number(e?.balance||0).toLocaleString("vi-VN"),"₫"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Loại t\xe0i khoản"}),i.jsx(y.C,{variant:e?.isAdmin?"default":"secondary",children:e?.isAdmin?"Quản trị vi\xean":"Th\xe0nh vi\xean"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Ng\xe0y tham gia"}),i.jsx("span",{className:"text-sm font-medium",children:e?.createdAt?new Date(e.createdAt).toLocaleDateString("vi-VN"):"N/A"})]})]})]}),(0,i.jsxs)(u.Zb,{children:[i.jsx(u.Ol,{children:i.jsx(u.ll,{children:"Lịch sử nạp tiền gần đ\xe2y"})}),i.jsx(u.aY,{children:T?i.jsx("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,s)=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-24"}),i.jsx("div",{className:"h-3 bg-muted rounded w-16"})]}),i.jsx("div",{className:"h-4 bg-muted rounded w-20"})]},s))}):_.length>0?i.jsx("div",{className:"space-y-3",children:_.map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-6 h-6 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:i.jsx(w.Z,{className:"w-3 h-3 text-emerald-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"text-sm font-medium",children:["+",Number(e.amount).toLocaleString("vi-VN"),"₫"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString("vi-VN")})]})]}),i.jsx(y.C,{variant:"completed"===e.status?"default":"pending"===e.status?"secondary":"destructive",className:"text-xs",children:"completed"===e.status?(0,i.jsxs)(i.Fragment,{children:[i.jsx(L.Z,{className:"w-3 h-3 mr-1"}),"Th\xe0nh c\xf4ng"]}):"pending"===e.status?(0,i.jsxs)(i.Fragment,{children:[i.jsx(O.Z,{className:"w-3 h-3 mr-1"}),"Đang xử l\xfd"]}):"Thất bại"})]},e.id))}):i.jsx("div",{className:"text-center py-4",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Chưa c\xf3 giao dịch nạp tiền n\xe0o"})})})]})]})]})]})})})}},5074:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var i=t(9510);let n=(0,t(8570).createProxy)(String.raw`D:\TOOL\AutoHubWeb\frontend\src\features\payments\pages\Deposit.tsx#default`);function a(){return i.jsx(n,{})}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[561,918,369,539,230],()=>t(4183));module.exports=i})();