(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{14:function(e,t,a){Promise.resolve().then(a.bind(a,2236))},1671:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9388:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5252:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},525:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},9140:function(e,t,a){"use strict";a.d(t,{O:function(){return n}});var s=a(7437),i=a(1001);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",t),...a})}},8487:function(e,t,a){"use strict";a.d(t,{mQ:function(){return L},nU:function(){return S},dr:function(){return M},SP:function(){return A}});var s=a(7437),i=a(2265),n=a(6741),r=a(3966),l=a(1353),c=a(1599),d=a(6840),o=a(9114),u=a(886),m=a(9255),x="Tabs",[h,p]=(0,r.b)(x,[l.Pc]),f=(0,l.Pc)(),[g,j]=h(x),v=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:i,onValueChange:n,defaultValue:r,orientation:l="horizontal",dir:c,activationMode:x="automatic",...h}=e,p=(0,o.gm)(c),[f,j]=(0,u.T)({prop:i,onChange:n,defaultProp:r});return(0,s.jsx)(g,{scope:a,baseId:(0,m.M)(),value:f,onValueChange:j,orientation:l,dir:p,activationMode:x,children:(0,s.jsx)(d.WV.div,{dir:p,"data-orientation":l,...h,ref:t})})});v.displayName=x;var b="TabsList",N=i.forwardRef((e,t)=>{let{__scopeTabs:a,loop:i=!0,...n}=e,r=j(b,a),c=f(a);return(0,s.jsx)(l.fC,{asChild:!0,...c,orientation:r.orientation,dir:r.dir,loop:i,children:(0,s.jsx)(d.WV.div,{role:"tablist","aria-orientation":r.orientation,...n,ref:t})})});N.displayName=b;var y="TabsTrigger",w=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:i,disabled:r=!1,...c}=e,o=j(y,a),u=f(a),m=Z(o.baseId,i),x=O(o.baseId,i),h=i===o.value;return(0,s.jsx)(l.ck,{asChild:!0,...u,focusable:!r,active:h,children:(0,s.jsx)(d.WV.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:m,...c,ref:t,onMouseDown:(0,n.M)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(i)}),onKeyDown:(0,n.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(i)}),onFocus:(0,n.M)(e.onFocus,()=>{let e="manual"!==o.activationMode;h||r||!e||o.onValueChange(i)})})})});w.displayName=y;var k="TabsContent",C=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,forceMount:r,children:l,...o}=e,u=j(k,a),m=Z(u.baseId,n),x=O(u.baseId,n),h=n===u.value,p=i.useRef(h);return i.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(c.z,{present:r||h,children:a=>{let{present:i}=a;return(0,s.jsx)(d.WV.div,{"data-state":h?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!i,id:x,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:i&&l})}})});function Z(e,t){return"".concat(e,"-trigger-").concat(t)}function O(e,t){return"".concat(e,"-content-").concat(t)}C.displayName=k;var V=a(1001);let L=v,M=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(N,{ref:t,className:(0,V.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...i})});M.displayName=N.displayName;let A=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(w,{ref:t,className:(0,V.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...i})});A.displayName=w.displayName;let S=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(C,{ref:t,className:(0,V.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...i})});S.displayName=C.displayName},2236:function(e,t,a){"use strict";a.d(t,{default:function(){return b}});var s=a(7437),i=a(3076),n=a(3810),r=a(1632),l=a(2841),c=a(9820),d=a(9174),o=a(9140),u=a(8487);let m=(0,a(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var x=a(8226),h=a(525),p=a(2449),f=a(1671),g=a(1723),j=a(9388),v=a(5252);function b(){let{isAuthenticated:e}=(0,l.aC)(),{data:t,isLoading:a}=(0,r.useQuery)({queryKey:["/api/payments"],retry:!1}),{data:b,isLoading:N}=(0,r.useQuery)({queryKey:["/api/purchases"],retry:!1}),y=(null==t?void 0:t.filter(e=>"deposit"===e.type))||[],w=(null==t?void 0:t.filter(e=>"purchase"===e.type))||[],k=y.reduce((e,t)=>e+Number(t.amount),0),C=w.reduce((e,t)=>e+Math.abs(Number(t.amount)),0),Z=[{title:"Tổng số giao dịch",value:((null==t?void 0:t.length)||0)+((null==b?void 0:b.length)||0),icon:m,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900"},{title:"Tổng tiền đ\xe3 nạp",value:"".concat(k.toLocaleString("vi-VN"),"₫"),icon:x.Z,color:"text-emerald-600",bgColor:"bg-emerald-100 dark:bg-emerald-900"},{title:"Tổng tiền đ\xe3 chi",value:"".concat(C.toLocaleString("vi-VN"),"₫"),icon:h.Z,color:"text-orange-600",bgColor:"bg-orange-100 dark:bg-orange-900"},{title:"C\xf4ng cụ đ\xe3 mua",value:(null==b?void 0:b.length)||0,icon:p.Z,color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900"}],O=e=>{switch(e){case"completed":return(0,s.jsx)(f.Z,{className:"w-4 h-4 text-emerald-600"});case"pending":return(0,s.jsx)(g.Z,{className:"w-4 h-4 text-orange-600"});case"failed":return(0,s.jsx)(j.Z,{className:"w-4 h-4 text-red-600"});default:return(0,s.jsx)(g.Z,{className:"w-4 h-4 text-gray-600"})}},V=e=>{switch(e){case"completed":return"Th\xe0nh c\xf4ng";case"pending":return"Đang xử l\xfd";case"failed":return"Thất bại";default:return"Kh\xf4ng x\xe1c định"}},L=e=>{switch(e){case"completed":return"default";case"pending":return"secondary";case"failed":return"destructive";default:return"outline"}};return(0,s.jsx)(i.Ar,{showSidebar:e,children:(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Lịch sử giao dịch"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Xem lại tất cả c\xe1c giao dịch của bạn"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Z.map((e,t)=>(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*t},children:(0,s.jsx)(c.Zb,{className:"hover:shadow-lg transition-all duration-200 hover:-translate-y-1",children:(0,s.jsx)(c.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.title}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat(e.color),"data-testid":"text-stat-".concat(e.title.toLowerCase().replace(/\s+/g,"-")),children:e.value})]}),(0,s.jsx)("div",{className:"w-12 h-12 ".concat(e.bgColor," rounded-lg flex items-center justify-center"),children:(0,s.jsx)(e.icon,{className:"w-6 h-6 ".concat(e.color)})})]})})})},e.title))}),(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:(0,s.jsxs)(u.mQ,{defaultValue:"all",className:"space-y-6",children:[(0,s.jsxs)(u.dr,{className:"grid w-full grid-cols-3",children:[(0,s.jsx)(u.SP,{value:"all","data-testid":"tab-all-history",children:"Tất cả"}),(0,s.jsx)(u.SP,{value:"deposits","data-testid":"tab-deposits",children:"Nạp tiền"}),(0,s.jsx)(u.SP,{value:"purchases","data-testid":"tab-purchases",children:"Mua h\xe0ng"})]}),(0,s.jsx)(u.nU,{value:"all",children:(0,s.jsxs)(c.Zb,{children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{children:"Tất cả giao dịch"})}),(0,s.jsx)(c.aY,{children:a?(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(o.O,{className:"w-10 h-10 rounded-full"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(o.O,{className:"h-4 w-32"}),(0,s.jsx)(o.O,{className:"h-3 w-24"})]})]}),(0,s.jsxs)("div",{className:"text-right space-y-1",children:[(0,s.jsx)(o.O,{className:"h-4 w-20"}),(0,s.jsx)(o.O,{className:"h-3 w-16"})]})]},t))}):(null==t?void 0:t.length)===0?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(m,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Chưa c\xf3 giao dịch"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Bạn chưa thực hiện giao dịch n\xe0o"})]}):(0,s.jsx)("div",{className:"space-y-4",children:null==t?void 0:t.slice().reverse().map((e,t)=>(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.05*t},className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("deposit"===e.type?"bg-emerald-100 dark:bg-emerald-900":"bg-blue-100 dark:bg-blue-900"),children:"deposit"===e.type?(0,s.jsx)(x.Z,{className:"w-5 h-5 text-emerald-600"}):(0,s.jsx)(p.Z,{className:"w-5 h-5 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium","data-testid":"text-transaction-description-".concat(e.id),children:e.description||("deposit"===e.type?"Nạp tiền":"Mua c\xf4ng cụ")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground","data-testid":"text-transaction-date-".concat(e.id),children:e.createdAt?new Date(e.createdAt).toLocaleString("vi-VN"):"N/A"})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-bold text-lg ".concat("deposit"===e.type?"text-emerald-600":"text-orange-600"),"data-testid":"text-transaction-amount-".concat(e.id),children:["deposit"===e.type?"+":"",Number(e.amount).toLocaleString("vi-VN"),"₫"]}),(0,s.jsxs)(d.C,{variant:L(e.status),className:"mt-1",children:[O(e.status),(0,s.jsx)("span",{className:"ml-1",children:V(e.status)})]})]})]},e.id))})})]})}),(0,s.jsx)(u.nU,{value:"deposits",children:(0,s.jsxs)(c.Zb,{children:[(0,s.jsx)(c.Ol,{children:(0,s.jsxs)(c.ll,{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"mr-2 h-5 w-5 text-emerald-600"}),"Lịch sử nạp tiền"]})}),(0,s.jsx)(c.aY,{children:a?(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(o.O,{className:"w-10 h-10 rounded-full"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(o.O,{className:"h-4 w-32"}),(0,s.jsx)(o.O,{className:"h-3 w-24"})]})]}),(0,s.jsx)(o.O,{className:"h-4 w-20"})]},t))}):0===y.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(x.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Chưa c\xf3 giao dịch nạp tiền"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Bạn chưa nạp tiền v\xe0o t\xe0i khoản"})]}):(0,s.jsx)("div",{className:"space-y-4",children:y.slice().reverse().map((e,t)=>(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.05*t},className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:(0,s.jsx)(v.Z,{className:"w-5 h-5 text-emerald-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium","data-testid":"text-deposit-description-".concat(e.id),children:e.description||"Nạp tiền v\xe0o t\xe0i khoản"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.createdAt?new Date(e.createdAt).toLocaleString("vi-VN"):"N/A"})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-bold text-lg text-emerald-600","data-testid":"text-deposit-amount-".concat(e.id),children:["+",Number(e.amount).toLocaleString("vi-VN"),"₫"]}),(0,s.jsxs)(d.C,{variant:L(e.status),className:"mt-1",children:[O(e.status),(0,s.jsx)("span",{className:"ml-1",children:V(e.status)})]})]})]},e.id))})})]})}),(0,s.jsx)(u.nU,{value:"purchases",children:(0,s.jsxs)(c.Zb,{children:[(0,s.jsx)(c.Ol,{children:(0,s.jsxs)(c.ll,{className:"flex items-center",children:[(0,s.jsx)(p.Z,{className:"mr-2 h-5 w-5 text-blue-600"}),"Lịch sử mua h\xe0ng"]})}),(0,s.jsx)(c.aY,{children:N?(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(o.O,{className:"w-10 h-10 rounded-lg"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(o.O,{className:"h-4 w-32"}),(0,s.jsx)(o.O,{className:"h-3 w-24"})]})]}),(0,s.jsx)(o.O,{className:"h-4 w-20"})]},t))}):(null==b?void 0:b.length)===0?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(p.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Chưa mua c\xf4ng cụ n\xe0o"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Bạn chưa mua c\xf4ng cụ n\xe0o từ thị trường"})]}):(0,s.jsx)("div",{className:"space-y-4",children:null==b?void 0:b.slice().reverse().map((e,t)=>{let a=new Date(e.expiresAt)<new Date;return(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.05*t},className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)(p.Z,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium","data-testid":"text-purchase-tool-name-".concat(e.id),children:e.tool.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Mua ng\xe0y ",e.createdAt?new Date(e.createdAt).toLocaleString("vi-VN"):"N/A"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-bold text-lg","data-testid":"text-purchase-final-price-".concat(e.id),children:[Number(e.finalPrice).toLocaleString("vi-VN"),"₫"]}),(0,s.jsx)(d.C,{variant:a?"destructive":"default",className:"mt-1",children:a?"Đ\xe3 hết hạn":"Đang hoạt động"})]})]},e.id)})})})]})})]})})]})})})}}},function(e){e.O(0,[699,680,789,972,716,632,808,841,971,117,744],function(){return e(e.s=14)}),_N_E=e.O()}]);