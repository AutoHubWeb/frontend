(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[449],{9366:function(e,s,t){Promise.resolve().then(t.bind(t,848))},1671:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5252:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(9205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},1804:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(9205).Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},848:function(e,s,t){"use strict";t.d(s,{default:function(){return M}});var n=t(7437),i=t(2265),a=t(3076),l=t(3810),d=t(9827),c=t(1632),r=t(1770),h=t(2841),o=t(3340),m=t(8410),u=t(962),x=t(9820),p=t(2381),g=t(279),j=t(5060),N=t(1001);let v=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,n.jsx)("textarea",{className:(0,N.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});v.displayName="Textarea";var y=t(9174),b=t(8226),f=t(1804);let k=(0,t(9205).Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);var w=t(5252),S=t(1671),C=t(1723);function M(){let{user:e,isAuthenticated:s}=(0,h.aC)(),{toast:t}=(0,o.pm)(),N=(0,d.useQueryClient)(),[M,Z]=(0,i.useState)(""),[L,T]=(0,i.useState)(""),{data:A,isLoading:O}=(0,c.useQuery)({queryKey:["/api/payments"],retry:!1}),V=(0,r.useMutation)({mutationFn:async e=>{let{amount:s,description:t}=e,n=await (0,u.Nv)("POST","/api/deposit",{amount:100*Number(s),description:t});return await n.json()},onSuccess:()=>{t({title:"Nạp tiền th\xe0nh c\xf4ng",description:"Số dư của bạn đ\xe3 được cập nhật"}),N.invalidateQueries({queryKey:["/api/auth/user"]}),N.invalidateQueries({queryKey:["/api/payments"]}),Z(""),T("")},onError:e=>{if((0,m.TW)(e)){t({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="https://shopnro.hitly.click/api/login"},500);return}t({title:"Lỗi",description:e.message||"Kh\xf4ng thể nạp tiền",variant:"destructive"})}}),E=(null==A?void 0:A.filter(e=>"deposit"===e.type).slice(0,5))||[];return(0,n.jsx)(a.Ar,{showSidebar:s,children:(0,n.jsx)("div",{className:"p-8",children:(0,n.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Nạp tiền"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Nạp tiền v\xe0o t\xe0i khoản để mua c\xe1c c\xf4ng cụ"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,n.jsxs)(l.E.div,{className:"lg:col-span-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:[(0,n.jsxs)(x.Zb,{children:[(0,n.jsx)(x.Ol,{children:(0,n.jsxs)(x.ll,{className:"flex items-center",children:[(0,n.jsx)(b.Z,{className:"mr-2 h-5 w-5"}),"Nạp tiền v\xe0o t\xe0i khoản"]})}),(0,n.jsxs)(x.aY,{className:"space-y-6",children:[(0,n.jsx)("div",{className:"bg-muted/50 p-4 rounded-lg",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(f.Z,{className:"h-5 w-5 text-emerald-600"}),(0,n.jsx)("span",{className:"font-medium",children:"Số dư hiện tại:"})]}),(0,n.jsxs)("span",{className:"text-2xl font-bold text-emerald-600","data-testid":"text-current-balance",children:[Number((null==e?void 0:e.balance)||0).toLocaleString("vi-VN"),"₫"]})]})}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(j._,{children:"Chọn nhanh số tiền"}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[5e4,1e5,2e5,5e5,1e6,2e6].map(e=>(0,n.jsxs)(p.z,{variant:M===e.toString()?"default":"outline",size:"sm",onClick:()=>Z(e.toString()),"data-testid":"button-quick-amount-".concat(e),children:[e.toLocaleString("vi-VN"),"₫"]},e))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(j._,{htmlFor:"amount",children:"Hoặc nhập số tiền t\xf9y chỉnh (₫)"}),(0,n.jsx)(g.I,{id:"amount",type:"number",placeholder:"Nhập số tiền muốn nạp",value:M,onChange:e=>Z(e.target.value),min:"10000",step:"10000","data-testid":"input-custom-amount"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Số tiền tối thiểu: 10,000₫"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(j._,{htmlFor:"description",children:"Ghi ch\xfa (t\xf9y chọn)"}),(0,n.jsx)(v,{id:"description",placeholder:"Nhập ghi ch\xfa cho giao dịch n\xe0y",value:L,onChange:e=>T(e.target.value),rows:3,"data-testid":"input-description"})]}),(0,n.jsx)(p.z,{className:"w-full",onClick:()=>{if(!M||0>=Number(M)){t({title:"Lỗi",description:"Vui l\xf2ng nhập số tiền hợp lệ",variant:"destructive"});return}V.mutate({amount:M,description:L||"Nạp tiền v\xe0o t\xe0i khoản"})},disabled:!M||0>=Number(M)||V.isPending,"data-testid":"button-deposit",children:V.isPending?"Đang xử l\xfd...":"Nạp ".concat(M?Number(M).toLocaleString("vi-VN")+"₫":"tiền")})]})]}),(0,n.jsxs)(x.Zb,{className:"mt-6",children:[(0,n.jsx)(x.Ol,{children:(0,n.jsxs)(x.ll,{className:"flex items-center",children:[(0,n.jsx)(k,{className:"mr-2 h-5 w-5"}),"Hướng dẫn nạp tiền"]})}),(0,n.jsx)(x.aY,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Chuyển khoản ng\xe2n h\xe0ng"}),(0,n.jsxs)("div",{className:"text-sm space-y-1",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Ng\xe2n h\xe0ng:"})," Vietcombank"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Số t\xe0i khoản:"})," 1234567890"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Chủ t\xe0i khoản:"})," CONG TY TOOLMARKET"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Nội dung:"})," NAPIEN [email của bạn]"]})]})]}),(0,n.jsxs)("div",{className:"bg-emerald-50 dark:bg-emerald-950 p-4 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-semibold text-emerald-800 dark:text-emerald-200 mb-2",children:"V\xed điện tử MoMo"}),(0,n.jsxs)("div",{className:"text-sm space-y-1",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Số điện thoại:"})," 0901234567"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Chủ t\xe0i khoản:"})," TOOLMARKET"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Nội dung:"})," NAPIEN [email của bạn]"]})]})]}),(0,n.jsxs)("div",{className:"text-sm text-muted-foreground p-4 bg-muted/50 rounded-lg",children:[(0,n.jsx)("p",{className:"font-medium mb-2",children:"Lưu \xfd quan trọng:"}),(0,n.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,n.jsx)("li",{children:"Vui l\xf2ng ghi đ\xfang nội dung chuyển khoản để hệ thống tự động cộng tiền"}),(0,n.jsx)("li",{children:"Số dư sẽ được cập nhật trong v\xf2ng 5-10 ph\xfat sau khi chuyển khoản th\xe0nh c\xf4ng"}),(0,n.jsx)("li",{children:"Nếu c\xf3 vấn đề, vui l\xf2ng li\xean hệ bộ phận hỗ trợ"})]})]})]})})]})]}),(0,n.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:[(0,n.jsxs)(x.Zb,{className:"mb-6",children:[(0,n.jsx)(x.Ol,{children:(0,n.jsx)(x.ll,{children:"Th\xf4ng tin t\xe0i khoản"})}),(0,n.jsxs)(x.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:"Số dư hiện tại"}),(0,n.jsxs)("span",{className:"font-bold text-emerald-600","data-testid":"text-sidebar-balance",children:[Number((null==e?void 0:e.balance)||0).toLocaleString("vi-VN"),"₫"]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loại t\xe0i khoản"}),(0,n.jsx)(y.C,{variant:(null==e?void 0:e.isAdmin)?"default":"secondary",children:(null==e?void 0:e.isAdmin)?"Quản trị vi\xean":"Th\xe0nh vi\xean"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:"Ng\xe0y tham gia"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:(null==e?void 0:e.createdAt)?new Date(e.createdAt).toLocaleDateString("vi-VN"):"N/A"})]})]})]}),(0,n.jsxs)(x.Zb,{children:[(0,n.jsx)(x.Ol,{children:(0,n.jsx)(x.ll,{children:"Lịch sử nạp tiền gần đ\xe2y"})}),(0,n.jsx)(x.aY,{children:O?(0,n.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,s)=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("div",{className:"h-4 bg-muted rounded w-24"}),(0,n.jsx)("div",{className:"h-3 bg-muted rounded w-16"})]}),(0,n.jsx)("div",{className:"h-4 bg-muted rounded w-20"})]},s))}):E.length>0?(0,n.jsx)("div",{className:"space-y-3",children:E.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-6 h-6 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:(0,n.jsx)(w.Z,{className:"w-3 h-3 text-emerald-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"text-sm font-medium",children:["+",Number(e.amount).toLocaleString("vi-VN"),"₫"]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString("vi-VN")})]})]}),(0,n.jsx)(y.C,{variant:"completed"===e.status?"default":"pending"===e.status?"secondary":"destructive",className:"text-xs",children:"completed"===e.status?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.Z,{className:"w-3 h-3 mr-1"}),"Th\xe0nh c\xf4ng"]}):"pending"===e.status?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Z,{className:"w-3 h-3 mr-1"}),"Đang xử l\xfd"]}):"Thất bại"})]},e.id))}):(0,n.jsx)("div",{className:"text-center py-4",children:(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Chưa c\xf3 giao dịch nạp tiền n\xe0o"})})})]})]})]})]})})})}}},function(e){e.O(0,[699,680,789,972,716,632,808,841,971,117,744],function(){return e(e.s=9366)}),_N_E=e.O()}]);