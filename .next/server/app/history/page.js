(()=>{var e={};e.id=811,e.ids=[811],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9610:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c}),s(6296),s(7658),s(1930),s(2523);var a=s(3191),i=s(8716),r=s(7922),n=s.n(r),l=s(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6296)),"D:\\TOOL\\AutoHubWeb\\frontend\\src\\app\\history\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7658)),"D:\\TOOL\\AutoHubWeb\\frontend\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,1930)),"D:\\TOOL\\AutoHubWeb\\frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2523)),"D:\\TOOL\\AutoHubWeb\\frontend\\src\\app\\not-found.tsx"]}],o=["D:\\TOOL\\AutoHubWeb\\frontend\\src\\app\\history\\page.tsx"],m="/history/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/history/page",pathname:"/history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1335:(e,t,s)=>{Promise.resolve().then(s.bind(s,8835))},361:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9669:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1821:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},7069:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},8227:(e,t,s)=>{"use strict";s.d(t,{O:()=>r});var a=s(326),i=s(1867);function r({className:e,...t}){return a.jsx("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",e),...t})}},9744:(e,t,s)=>{"use strict";s.d(t,{mQ:()=>P,nU:()=>M,dr:()=>L,SP:()=>T});var a=s(326),i=s(7577),r=s(2561),n=s(3095),l=s(5594),d=s(9815),c=s(5226),o=s(7124),m=s(2067),u=s(8957),x="Tabs",[h,p]=(0,n.b)(x,[l.Pc]),g=(0,l.Pc)(),[j,b]=h(x),f=i.forwardRef((e,t)=>{let{__scopeTabs:s,value:i,onValueChange:r,defaultValue:n,orientation:l="horizontal",dir:d,activationMode:x="automatic",...h}=e,p=(0,o.gm)(d),[g,b]=(0,m.T)({prop:i,onChange:r,defaultProp:n});return(0,a.jsx)(j,{scope:s,baseId:(0,u.M)(),value:g,onValueChange:b,orientation:l,dir:p,activationMode:x,children:(0,a.jsx)(c.WV.div,{dir:p,"data-orientation":l,...h,ref:t})})});f.displayName=x;var v="TabsList",y=i.forwardRef((e,t)=>{let{__scopeTabs:s,loop:i=!0,...r}=e,n=b(v,s),d=g(s);return(0,a.jsx)(l.fC,{asChild:!0,...d,orientation:n.orientation,dir:n.dir,loop:i,children:(0,a.jsx)(c.WV.div,{role:"tablist","aria-orientation":n.orientation,...r,ref:t})})});y.displayName=v;var N="TabsTrigger",w=i.forwardRef((e,t)=>{let{__scopeTabs:s,value:i,disabled:n=!1,...d}=e,o=b(N,s),m=g(s),u=O(o.baseId,i),x=Z(o.baseId,i),h=i===o.value;return(0,a.jsx)(l.ck,{asChild:!0,...m,focusable:!n,active:h,children:(0,a.jsx)(c.WV.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...d,ref:t,onMouseDown:(0,r.M)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(i)}),onKeyDown:(0,r.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(i)}),onFocus:(0,r.M)(e.onFocus,()=>{let e="manual"!==o.activationMode;h||n||!e||o.onValueChange(i)})})})});w.displayName=N;var k="TabsContent",C=i.forwardRef((e,t)=>{let{__scopeTabs:s,value:r,forceMount:n,children:l,...o}=e,m=b(k,s),u=O(m.baseId,r),x=Z(m.baseId,r),h=r===m.value,p=i.useRef(h);return i.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(d.z,{present:n||h,children:({present:s})=>(0,a.jsx)(c.WV.div,{"data-state":h?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:x,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:s&&l})})});function O(e,t){return`${e}-trigger-${t}`}function Z(e,t){return`${e}-content-${t}`}C.displayName=k;var A=s(1867);let P=f,L=i.forwardRef(({className:e,...t},s)=>a.jsx(y,{ref:s,className:(0,A.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));L.displayName=y.displayName;let T=i.forwardRef(({className:e,...t},s)=>a.jsx(w,{ref:s,className:(0,A.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));T.displayName=w.displayName;let M=i.forwardRef(({className:e,...t},s)=>a.jsx(C,{ref:s,className:(0,A.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));M.displayName=C.displayName},8835:(e,t,s)=>{"use strict";s.d(t,{default:()=>v});var a=s(326),i=s(3978),r=s(9622),n=s(7369),l=s(230),d=s(9752),c=s(8443),o=s(8227),m=s(9744);let u=(0,s(2881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var x=s(8916),h=s(7069),p=s(4565),g=s(361),j=s(8998),b=s(9669),f=s(1821);function v(){let{isAuthenticated:e}=(0,l.aC)(),{data:t,isLoading:s}=(0,n.useQuery)({queryKey:["/api/payments"],retry:!1}),{data:v,isLoading:y}=(0,n.useQuery)({queryKey:["/api/purchases"],retry:!1}),N=t?.filter(e=>"deposit"===e.type)||[],w=t?.filter(e=>"purchase"===e.type)||[],k=N.reduce((e,t)=>e+Number(t.amount),0),C=w.reduce((e,t)=>e+Math.abs(Number(t.amount)),0),O=[{title:"Tổng số giao dịch",value:(t?.length||0)+(v?.length||0),icon:u,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900"},{title:"Tổng tiền đ\xe3 nạp",value:`${k.toLocaleString("vi-VN")}₫`,icon:x.Z,color:"text-emerald-600",bgColor:"bg-emerald-100 dark:bg-emerald-900"},{title:"Tổng tiền đ\xe3 chi",value:`${C.toLocaleString("vi-VN")}₫`,icon:h.Z,color:"text-orange-600",bgColor:"bg-orange-100 dark:bg-orange-900"},{title:"C\xf4ng cụ đ\xe3 mua",value:v?.length||0,icon:p.Z,color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900"}],Z=e=>{switch(e){case"completed":return a.jsx(g.Z,{className:"w-4 h-4 text-emerald-600"});case"pending":return a.jsx(j.Z,{className:"w-4 h-4 text-orange-600"});case"failed":return a.jsx(b.Z,{className:"w-4 h-4 text-red-600"});default:return a.jsx(j.Z,{className:"w-4 h-4 text-gray-600"})}},A=e=>{switch(e){case"completed":return"Th\xe0nh c\xf4ng";case"pending":return"Đang xử l\xfd";case"failed":return"Thất bại";default:return"Kh\xf4ng x\xe1c định"}},P=e=>{switch(e){case"completed":return"default";case"pending":return"secondary";case"failed":return"destructive";default:return"outline"}};return a.jsx(i.Ar,{showSidebar:e,children:a.jsx("div",{className:"p-8",children:(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Lịch sử giao dịch"}),a.jsx("p",{className:"text-muted-foreground",children:"Xem lại tất cả c\xe1c giao dịch của bạn"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:O.map((e,t)=>a.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*t},children:a.jsx(d.Zb,{className:"hover:shadow-lg transition-all duration-200 hover:-translate-y-1",children:a.jsx(d.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:e.title}),a.jsx("p",{className:`text-2xl font-bold ${e.color}`,"data-testid":`text-stat-${e.title.toLowerCase().replace(/\s+/g,"-")}`,children:e.value})]}),a.jsx("div",{className:`w-12 h-12 ${e.bgColor} rounded-lg flex items-center justify-center`,children:a.jsx(e.icon,{className:`w-6 h-6 ${e.color}`})})]})})})},e.title))}),a.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:(0,a.jsxs)(m.mQ,{defaultValue:"all",className:"space-y-6",children:[(0,a.jsxs)(m.dr,{className:"grid w-full grid-cols-3",children:[a.jsx(m.SP,{value:"all","data-testid":"tab-all-history",children:"Tất cả"}),a.jsx(m.SP,{value:"deposits","data-testid":"tab-deposits",children:"Nạp tiền"}),a.jsx(m.SP,{value:"purchases","data-testid":"tab-purchases",children:"Mua h\xe0ng"})]}),a.jsx(m.nU,{value:"all",children:(0,a.jsxs)(d.Zb,{children:[a.jsx(d.Ol,{children:a.jsx(d.ll,{children:"Tất cả giao dịch"})}),a.jsx(d.aY,{children:s?a.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(o.O,{className:"w-10 h-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx(o.O,{className:"h-4 w-32"}),a.jsx(o.O,{className:"h-3 w-24"})]})]}),(0,a.jsxs)("div",{className:"text-right space-y-1",children:[a.jsx(o.O,{className:"h-4 w-20"}),a.jsx(o.O,{className:"h-3 w-16"})]})]},t))}):t?.length===0?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(u,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Chưa c\xf3 giao dịch"}),a.jsx("p",{className:"text-muted-foreground",children:"Bạn chưa thực hiện giao dịch n\xe0o"})]}):a.jsx("div",{className:"space-y-4",children:t?.slice().reverse().map((e,t)=>a.jsxs(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.05*t},className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${"deposit"===e.type?"bg-emerald-100 dark:bg-emerald-900":"bg-blue-100 dark:bg-blue-900"}`,children:"deposit"===e.type?a.jsx(x.Z,{className:"w-5 h-5 text-emerald-600"}):a.jsx(p.Z,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium","data-testid":`text-transaction-description-${e.id}`,children:e.description||("deposit"===e.type?"Nạp tiền":"Mua c\xf4ng cụ")}),a.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`text-transaction-date-${e.id}`,children:e.createdAt?new Date(e.createdAt).toLocaleString("vi-VN"):"N/A"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:`font-bold text-lg ${"deposit"===e.type?"text-emerald-600":"text-orange-600"}`,"data-testid":`text-transaction-amount-${e.id}`,children:["deposit"===e.type?"+":"",Number(e.amount).toLocaleString("vi-VN"),"₫"]}),a.jsxs(c.C,{variant:P(e.status),className:"mt-1",children:[Z(e.status),a.jsx("span",{className:"ml-1",children:A(e.status)})]})]})]},e.id))})})]})}),a.jsx(m.nU,{value:"deposits",children:(0,a.jsxs)(d.Zb,{children:[a.jsx(d.Ol,{children:(0,a.jsxs)(d.ll,{className:"flex items-center",children:[a.jsx(x.Z,{className:"mr-2 h-5 w-5 text-emerald-600"}),"Lịch sử nạp tiền"]})}),a.jsx(d.aY,{children:s?a.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(o.O,{className:"w-10 h-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx(o.O,{className:"h-4 w-32"}),a.jsx(o.O,{className:"h-3 w-24"})]})]}),a.jsx(o.O,{className:"h-4 w-20"})]},t))}):0===N.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(x.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Chưa c\xf3 giao dịch nạp tiền"}),a.jsx("p",{className:"text-muted-foreground",children:"Bạn chưa nạp tiền v\xe0o t\xe0i khoản"})]}):a.jsx("div",{className:"space-y-4",children:N.slice().reverse().map((e,t)=>(0,a.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.05*t},className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:a.jsx(f.Z,{className:"w-5 h-5 text-emerald-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium","data-testid":`text-deposit-description-${e.id}`,children:e.description||"Nạp tiền v\xe0o t\xe0i khoản"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.createdAt?new Date(e.createdAt).toLocaleString("vi-VN"):"N/A"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-lg text-emerald-600","data-testid":`text-deposit-amount-${e.id}`,children:["+",Number(e.amount).toLocaleString("vi-VN"),"₫"]}),(0,a.jsxs)(c.C,{variant:P(e.status),className:"mt-1",children:[Z(e.status),a.jsx("span",{className:"ml-1",children:A(e.status)})]})]})]},e.id))})})]})}),a.jsx(m.nU,{value:"purchases",children:(0,a.jsxs)(d.Zb,{children:[a.jsx(d.Ol,{children:(0,a.jsxs)(d.ll,{className:"flex items-center",children:[a.jsx(p.Z,{className:"mr-2 h-5 w-5 text-blue-600"}),"Lịch sử mua h\xe0ng"]})}),a.jsx(d.aY,{children:y?a.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(o.O,{className:"w-10 h-10 rounded-lg"}),(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx(o.O,{className:"h-4 w-32"}),a.jsx(o.O,{className:"h-3 w-24"})]})]}),a.jsx(o.O,{className:"h-4 w-20"})]},t))}):v?.length===0?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(p.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Chưa mua c\xf4ng cụ n\xe0o"}),a.jsx("p",{className:"text-muted-foreground",children:"Bạn chưa mua c\xf4ng cụ n\xe0o từ thị trường"})]}):a.jsx("div",{className:"space-y-4",children:v?.slice().reverse().map((e,t)=>{let s=new Date(e.expiresAt)<new Date;return a.jsxs(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.05*t},className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(p.Z,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium","data-testid":`text-purchase-tool-name-${e.id}`,children:e.tool.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Mua ng\xe0y ",e.createdAt?new Date(e.createdAt).toLocaleString("vi-VN"):"N/A"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold text-lg","data-testid":`text-purchase-final-price-${e.id}`,children:[Number(e.finalPrice).toLocaleString("vi-VN"),"₫"]}),a.jsx(c.C,{variant:s?"destructive":"default",className:"mt-1",children:s?"Đ\xe3 hết hạn":"Đang hoạt động"})]})]},e.id)})})})]})})]})})]})})})}},6296:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(9510);let i=(0,s(8570).createProxy)(String.raw`D:\TOOL\AutoHubWeb\frontend\src\features\payments\pages\History.tsx#default`);function r(){return a.jsx(i,{})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[561,918,369,539,230],()=>s(9610));module.exports=a})();